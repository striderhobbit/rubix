<div
  class="cube"
  [style]="{
    '--rotate-x': rotation.axisX,
    '--rotate-y': rotation.axisY,
    '--rotate-z': rotation.axisZ,
    '--rotate-a': rotation.angle
  }"
>
  <div
    class="cubicle {{ cubicle.layers.join(' ') }}"
    *ngFor="let cubicle of cubicles"
    (animationend)="animations.next(cubicle.layers)"
  >
    <div
      class="cubie"
      [style]="{
        '--x': cubicle.coords.x,
        '--y': cubicle.coords.y,
        '--z': cubicle.coords.z
      }"
    >
      <div
        *ngFor="let _ of [].constructor(6); index as j"
        class="cubie-face cubie-face--{{ stickers[cubicle.index + j] }}"
        [style.--color]="
          'var(--color-' +
          stickers[permutation.preimage(cubicle.index + j)] +
          ')'
        "
      ></div>
    </div>
  </div>
</div>
